#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ lint-staged Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
echo "ğŸ“ Running lint-staged..."
npx lint-staged

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ¾Ğ² TypeScript
echo "ğŸ” Running TypeScript type check..."
npm run type-check || {
  echo "âŒ TypeScript type check failed!"
  exit 1
}

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¸Ğ½Ñ‚Ğ¸Ğ½Ğ³Ğ° (Ğ¿Ğ¾ÑĞ»Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹)
echo "ğŸ§¹ Running ESLint..."
npm run lint || {
  echo "âŒ ESLint check failed!"
  exit 1
}

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
echo "âœ¨ Checking code formatting..."
npm run format:check || {
  echo "âŒ Code formatting check failed! Run 'npm run format' to fix."
  exit 1
}

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ¸Ğ»Ğ´Ğ°
echo "ğŸ—ï¸  Running build check..."
npm run build || {
  echo "âŒ Build check failed!"
  exit 1
}

echo "âœ… All pre-commit checks passed!"
